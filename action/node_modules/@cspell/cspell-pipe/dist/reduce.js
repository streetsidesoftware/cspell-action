"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.reduce = exports.reduceAsync = exports.reduceSync = void 0;
const helpers_1 = require("./helpers");
const toArray_1 = require("./helpers/toArray");
const operators_1 = require("./operators");
const pipe_1 = require("./pipe");
function reduceSync(iter, reduceFn, initialValue) {
    const i = initialValue !== undefined
        ? (0, pipe_1.pipeSync)(iter, (0, operators_1.opReduceSync)(reduceFn, initialValue))
        : (0, pipe_1.pipeSync)(iter, (0, operators_1.opReduceSync)(reduceFn));
    return [...i][0];
}
exports.reduceSync = reduceSync;
async function reduceAsync(iter, reduceFn, initialValue) {
    const i = initialValue !== undefined
        ? (0, pipe_1.pipeAsync)(iter, (0, operators_1.opReduceAsync)(reduceFn, initialValue))
        : (0, pipe_1.pipeAsync)(iter, (0, operators_1.opReduceAsync)(reduceFn));
    return (await (0, toArray_1.toArrayAsync)(i))[0];
}
exports.reduceAsync = reduceAsync;
function reduce(iter, reduceFn, initialValue) {
    return (0, helpers_1.isAsyncIterable)(iter) ? reduceAsync(iter, reduceFn, initialValue) : reduceSync(iter, reduceFn, initialValue);
}
exports.reduce = reduce;
//# sourceMappingURL=reduce.js.map
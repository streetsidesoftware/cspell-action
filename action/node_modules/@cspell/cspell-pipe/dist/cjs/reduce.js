"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.reduce = exports.reduceAsync = exports.reduceSync = void 0;
const index_js_1 = require("./helpers/index.js");
const toArray_js_1 = require("./helpers/toArray.js");
const index_js_2 = require("./operators/index.js");
const pipe_js_1 = require("./pipe.js");
function reduceSync(iter, reduceFn, initialValue) {
    const i = initialValue === undefined
        ? (0, pipe_js_1.pipeSync)(iter, (0, index_js_2.opReduceSync)(reduceFn))
        : (0, pipe_js_1.pipeSync)(iter, (0, index_js_2.opReduceSync)(reduceFn, initialValue));
    return [...i][0];
}
exports.reduceSync = reduceSync;
async function reduceAsync(iter, reduceFn, initialValue) {
    const i = initialValue === undefined
        ? (0, pipe_js_1.pipeAsync)(iter, (0, index_js_2.opReduceAsync)(reduceFn))
        : (0, pipe_js_1.pipeAsync)(iter, (0, index_js_2.opReduceAsync)(reduceFn, initialValue));
    const arr = await (0, toArray_js_1.toArrayAsync)(i);
    return arr[0];
}
exports.reduceAsync = reduceAsync;
function reduce(iter, reduceFn, initialValue) {
    return (0, index_js_1.isAsyncIterable)(iter) ? reduceAsync(iter, reduceFn, initialValue) : reduceSync(iter, reduceFn, initialValue);
}
exports.reduce = reduce;
//# sourceMappingURL=reduce.js.map
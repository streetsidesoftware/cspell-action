"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDictionary = exports.refreshDictionaryCache = exports.loadDictionaryDefs = void 0;
const DictionarySettings_1 = require("../Settings/DictionarySettings");
const createSpellingDictionary_1 = require("./createSpellingDictionary");
const DictionaryLoader_1 = require("./DictionaryLoader");
const SpellingDictionaryCollection_1 = require("./SpellingDictionaryCollection");
function loadDictionaryDefs(defsToLoad) {
    return defsToLoad.map((def) => (0, DictionaryLoader_1.loadDictionary)(def.path, def));
}
exports.loadDictionaryDefs = loadDictionaryDefs;
function refreshDictionaryCache(maxAge) {
    return (0, DictionaryLoader_1.refreshCacheEntries)(maxAge);
}
exports.refreshDictionaryCache = refreshDictionaryCache;
function getDictionary(settings) {
    const { words = [], userWords = [], flagWords = [], ignoreWords = [] } = settings;
    const spellDictionaries = loadDictionaryDefs((0, DictionarySettings_1.calcDictionaryDefsToLoad)(settings));
    const settingsDictionary = (0, createSpellingDictionary_1.createSpellingDictionary)(words.concat(userWords), '[words]', 'From Settings `words` and `userWords`', {
        caseSensitive: true,
    });
    const ignoreWordsDictionary = (0, createSpellingDictionary_1.createSpellingDictionary)(ignoreWords, '[ignoreWords]', 'From Settings `ignoreWords`', {
        caseSensitive: true,
        noSuggest: true,
    });
    const flagWordsDictionary = (0, createSpellingDictionary_1.createForbiddenWordsDictionary)(flagWords, '[flagWords]', 'From Settings `flagWords`', {});
    return (0, SpellingDictionaryCollection_1.createCollectionP)([...spellDictionaries, settingsDictionary, ignoreWordsDictionary, flagWordsDictionary], 'dictionary collection');
}
exports.getDictionary = getDictionary;
//# sourceMappingURL=Dictionaries.js.map
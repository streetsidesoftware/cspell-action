import * as CSpellSettingsServer from './CSpellSettingsServer.mjs';
import { getInDocumentSettings } from './InDocSettings.mjs';
import { calcSettingsForLanguageId } from './LanguageSettings.mjs';
export function combineTextAndLanguageSettings(settings, text, languageId) {
    if (!text) {
        return CSpellSettingsServer.toInternalSettings(calcSettingsForLanguageId(settings, languageId));
    }
    const docSettings = extractSettingsFromText(text);
    const settingsForText = CSpellSettingsServer.mergeSettings(settings, docSettings);
    const langSettings = calcSettingsForLanguageId(settingsForText, languageId);
    // Merge again, to force In-Doc settings.
    return CSpellSettingsServer.mergeSettings(langSettings, docSettings);
}
export function extractSettingsFromText(text) {
    return getInDocumentSettings(text);
}

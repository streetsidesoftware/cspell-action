"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.normalizePnPSettings = exports.defaultPnPSettings = void 0;
const util_1 = require("../../../util/util");
exports.defaultPnPSettings = Object.freeze({});
let lastPnP = exports.defaultPnPSettings;
/**
 * create PnPSettings object that can be used to compare to the last call.
 * This is to reduce object churn and unnecessary configuration loading.
 * @param settings - value to normalize
 * @returns
 */
function normalizePnPSettings(settings) {
    if (equal(lastPnP, settings))
        return lastPnP;
    if (equal(exports.defaultPnPSettings, settings))
        return exports.defaultPnPSettings;
    const { usePnP, pnpFiles } = settings;
    return (lastPnP = (0, util_1.clean)({ usePnP, pnpFiles }));
}
exports.normalizePnPSettings = normalizePnPSettings;
function equal(a, b) {
    return (a === b ||
        (a.usePnP === b.usePnP && (a.pnpFiles === b.pnpFiles || a.pnpFiles?.join('|') === b.pnpFiles?.join('|'))));
}
//# sourceMappingURL=PnPSettings.js.map
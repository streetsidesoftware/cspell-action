export class AutoCacheMap extends Map {
    constructor(autoFn) {
        super();
        this.autoFn = autoFn;
    }
    get(v) {
        const r = super.get(v);
        if (r !== undefined)
            return r;
        const u = this.autoFn(v);
        super.set(v, u);
        return u;
    }
}
export class AutoCacheWeakMap extends WeakMap {
    constructor(autoFn) {
        super();
        this.autoFn = autoFn;
    }
    get(v) {
        const r = super.get(v);
        if (r !== undefined)
            return r;
        const u = this.autoFn(v);
        super.set(v, u);
        return u;
    }
}
